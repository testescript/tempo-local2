<!DOCTYPE html>
<html lang="pt">
 <head>
  <meta charset="utf-8"/>
  <title>
   Previsão Hora a Hora
  </title>
  <link href="style.css" rel="stylesheet"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
 </head>
 <body>
  <nav>
   <a href="index.html">
    Início
   </a>
   <a href="avisos.html">
    Avisos
   </a>
   <a href="condicoes.html">
    Condições
   </a>
   <a href="previsao.html">
    Previsão
   </a>
   <a href="mares.html">
    Marés &amp; Lua
   </a>
   <a href="sensores.html">
    Sensores
   </a>
   <a href="historico.html">
    Histórico
   </a>
   <a href="NASA - Imagens Espaciais.html">
    Nasa
   </a>
  </nav>
  <script>
   const LAT = 39.3581;
  const LON = -9.1579;
  const OWM_API_KEY = 'cd841c18c5722b58544e13701456c88f';

  async function carregarPrevisao() {
    const previsaoDiv = document.getElementById('previsao');
    const tempDiv = document.getElementById('previsao-temperatura');
    try {
      const response = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${LAT}&lon=${LON}&exclude=current,minutely,daily,alerts&appid=${OWM_API_KEY}&lang=pt&units=metric`);
      const data = await response.json();

      previsaoDiv.classList.remove('loading');
      tempDiv.classList.remove('loading');

      previsaoDiv.innerHTML = '<ul>' + data.hourly.slice(0, 12).map(hour => {
        const date = new Date(hour.dt * 1000);
        return `<li>${date.getHours()}:00 - ${hour.weather[0].description}</li>`;
      }).join('') + '</ul>';

      tempDiv.innerHTML = '<ul>' + data.hourly.slice(0, 12).map(hour => {
        const date = new Date(hour.dt * 1000);
        return `<li>${date.getHours()}:00 - ${hour.temp} °C</li>`;
      }).join('') + '</ul>';
    } catch (error) {
      previsaoDiv.textContent = 'Erro ao carregar previsão.';
      tempDiv.textContent = '';
      console.error(error);
    }
  }

  carregarPrevisao();
  </script>
  <main>
   <h1>
    Previsão Hora a Hora
   </h1>
   <div class="loading" id="previsao">
    Carregando previsão...
   </div>
   <h2>
    Previsão de Temperatura
   </h2>
   <div class="loading" id="previsao-temperatura">
   </div>
  </main>
 </body>
</html>